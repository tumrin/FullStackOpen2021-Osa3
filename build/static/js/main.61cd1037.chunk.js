(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),o=t(15),r=t.n(o),i=(t(20),t(3)),s=t(4),u=t(0),d=function(e){var n=e.error;if(!n)return Object(u.jsx)(u.Fragment,{});var t={color:n.success?"green":"red",fontSize:16,borderStyle:"solid",padding:5};return Object(u.jsxs)("div",{style:t,children:["".concat(n.operation," ").concat(n.name," "),n.success?"succesful":"failed, ".concat(n.message)]})},l=t(5),m=t.n(l),b={addContact:function(e,n){m.a.post("/api/persons",{name:e.name,number:e.number,id:e.id}).then((function(){n({success:!0,operation:"adding",name:e.name})})).catch((function(t){console.log("".concat(t," in addContact")),console.log(t.response.data),n({success:!1,operation:"adding",name:e.name,message:t.response.data})})),setTimeout((function(){n(null)}),5e3)},deleteContact:function(e,n){m.a.delete("/api/persons/".concat(e.id)).then((function(){n({success:!0,operation:"deleting",name:e.name})})).catch((function(t){console.log("".concat(t," in editContact")),n({success:!1,operation:"deleting",name:e.name,message:"Contact already removed"})})),setTimeout((function(){n(null)}),5e3)},getContacts:function(e){return m.a.get("/api/persons").then((function(e){return e.data})).catch((function(e){return console.log("".concat(e," in getContact"))}))},editContact:function(e,n,t){console.log(e.id),console.log(e),m.a.put("/api/persons/".concat(e.id),Object(i.a)(Object(i.a)({},e),{},{number:n})).then((function(){t({success:!0,operation:"editing",name:e.name})})).catch((function(n){console.log("".concat(n," in editContact")),t({success:!1,operation:"editing",name:e.name,message:"Contact already removed"})})),setTimeout((function(){t(null)}),5e3)}},j=function(e){var n=e.person;return Object(u.jsxs)("p",{style:{display:"inline-block"},children:[n.name," ",n.number]})},f=function(e){var n=e.newFilter,t=e.filterHandler;return Object(u.jsx)("input",{value:n,onChange:t})},h=function(e){var n=e.addPerson,t=e.newName,c=e.nameHandler,a=e.newNumber,o=e.numberHandler;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:a,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},p=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(s.a)(o,2),l=r[0],m=r[1],p=Object(c.useState)(""),O=Object(s.a)(p,2),g=O[0],v=O[1],x=Object(c.useState)(""),C=Object(s.a)(x,2),w=C[0],y=C[1],S=Object(c.useState)(t),N=Object(s.a)(S,2),k=N[0],H=N[1],E=Object(c.useState)(null),F=Object(s.a)(E,2),P=F[0],T=F[1];Object(c.useEffect)((function(){b.getContacts(T).then((function(e){a(e),H(e)}))}),[]);var D=function(e,n){H(t.map((function(t){return t.name===e.name?Object(i.a)(Object(i.a)({},t),{},{number:n}):t}))),a(t.map((function(t){return t.name===e.name?Object(i.a)(Object(i.a)({},t),{},{number:n}):t}))),b.editContact(e,n,T)};return Object(u.jsxs)("div",{children:[Object(u.jsx)(d,{error:P}),Object(u.jsx)("h2",{children:"Phonebook"}),"filter shown with",Object(u.jsx)(f,{filterHandler:function(e){y(e.target.value),H(""===e.target.value?t:t.filter((function(n){return n.name.match(new RegExp("^".concat(e.target.value,"\\w*"),"gi"))})))},newFilter:w}),Object(u.jsx)("h2",{children:"Add New"}),Object(u.jsx)(h,{addPerson:function(e){e.preventDefault(),t.some((function(e){return e.name===l}))?window.confirm("".concat(l," is already added to phonebook, change number?"))&&D(t.find((function(e){return e.name===l})),g):(b.addContact({name:l,number:g,id:t.length+1},T),""===w&&H(k.concat({name:l,number:g,id:t.length+1})),a(t.concat({name:l,number:g,id:t.length+1})))},newName:l,nameHandler:function(e){m(e.target.value)},newNumber:g,numberHandler:function(e){v(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),k?k.map((function(e){return Object(u.jsxs)("div",{className:"personentry",children:[Object(u.jsx)(j,{person:e})," ",Object(u.jsx)("button",{onClick:function(){return n=e,void(window.confirm("Delete ".concat(n.name))&&(H(t.filter((function(e){return e.id!==n.id}))),a(t.filter((function(e){return e.id!==n.id}))),console.log(n.id),b.deleteContact(n,T)));var n},children:"delete"})]},e.name)})):""]})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.61cd1037.chunk.js.map