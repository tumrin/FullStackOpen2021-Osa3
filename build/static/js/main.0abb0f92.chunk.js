(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),o=t(15),r=t.n(o),i=(t(20),t(3)),u=t(4),s=t(0),l=function(e){var n=e.error;if(!n)return Object(s.jsx)(s.Fragment,{});var t={color:n.success?"green":"red",fontSize:16,borderStyle:"solid",padding:5};return Object(s.jsxs)("div",{style:t,children:["".concat(n.operation," ").concat(n.name," "),n.success?"succesful":"failed, contact already removed from server"]})},d=t(5),b=t.n(d),m={addContact:function(e,n){b.a.post("/api/persons",{name:e.name,number:e.number,id:e.id}).then((function(){n({success:!0,operation:"adding",name:e.name})})).catch((function(t){console.log("".concat(t," in editContact")),console.log(t.response.data),n({success:!1,operation:"adding",name:e.name})})),setTimeout((function(){n(null)}),5e3)},deleteContact:function(e,n){b.a.delete("/api/persons/".concat(e.id)).then((function(){n({success:!0,operation:"deleting",name:e.name})})).catch((function(t){console.log("".concat(t," in editContact")),n({success:!1,operation:"deleting",name:e.name})})),setTimeout((function(){n(null)}),5e3)},getContacts:function(e){return b.a.get("/api/persons").then((function(e){return e.data})).catch((function(e){return console.log("".concat(e," in getContact"))}))},editContact:function(e,n,t){console.log(e.id),console.log(e),b.a.put("/api/persons/".concat(e.id),Object(i.a)(Object(i.a)({},e),{},{number:n})).then((function(){t({success:!0,operation:"editing",name:e.name})})).catch((function(n){console.log("".concat(n," in editContact")),t({success:!1,operation:"editing",name:e.name})})),setTimeout((function(){t(null)}),5e3)}},j=function(e){var n=e.person;return Object(s.jsxs)("p",{style:{display:"inline-block"},children:[n.name," ",n.number]})},f=function(e){var n=e.newFilter,t=e.filterHandler;return Object(s.jsx)("input",{value:n,onChange:t})},h=function(e){var n=e.addPerson,t=e.newName,c=e.nameHandler,a=e.newNumber,o=e.numberHandler;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:c})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:a,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},O=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(u.a)(o,2),d=r[0],b=r[1],O=Object(c.useState)(""),p=Object(u.a)(O,2),g=p[0],v=p[1],x=Object(c.useState)(""),w=Object(u.a)(x,2),C=w[0],S=w[1],y=Object(c.useState)(t),N=Object(u.a)(y,2),k=N[0],H=N[1],E=Object(c.useState)(null),F=Object(u.a)(E,2),P=F[0],T=F[1];Object(c.useEffect)((function(){m.getContacts(T).then((function(e){a(e),H(e)}))}),[]);var D=function(e,n){H(t.map((function(t){return t.name===e.name?Object(i.a)(Object(i.a)({},t),{},{number:n}):t}))),a(t.map((function(t){return t.name===e.name?Object(i.a)(Object(i.a)({},t),{},{number:n}):t}))),m.editContact(e,n,T)};return Object(s.jsxs)("div",{children:[Object(s.jsx)(l,{error:P}),Object(s.jsx)("h2",{children:"Phonebook"}),"filter shown with",Object(s.jsx)(f,{filterHandler:function(e){S(e.target.value),H(""===e.target.value?t:t.filter((function(n){return n.name.match(new RegExp("^".concat(e.target.value,"\\w*"),"gi"))})))},newFilter:C}),Object(s.jsx)("h2",{children:"Add New"}),Object(s.jsx)(h,{addPerson:function(e){e.preventDefault(),t.some((function(e){return e.name===d}))?window.confirm("".concat(d," is already added to phonebook, change number?"))&&D(t.find((function(e){return e.name===d})),g):(m.addContact({name:d,number:g,id:t.length+1},T),""===C&&H(k.concat({name:d,number:g,id:t.length+1})),a(t.concat({name:d,number:g,id:t.length+1})))},newName:d,nameHandler:function(e){b(e.target.value)},newNumber:g,numberHandler:function(e){v(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),k?k.map((function(e){return Object(s.jsxs)("div",{className:"personentry",children:[Object(s.jsx)(j,{person:e})," ",Object(s.jsx)("button",{onClick:function(){return n=e,void(window.confirm("Delete ".concat(n.name))&&(H(t.filter((function(e){return e.id!==n.id}))),a(t.filter((function(e){return e.id!==n.id}))),console.log(n.id),m.deleteContact(n,T)));var n},children:"delete"})]},e.name)})):""]})};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0abb0f92.chunk.js.map