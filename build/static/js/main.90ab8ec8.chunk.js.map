{"version":3,"sources":["Message.js","ServerFunctions.js","App.js","index.js"],"names":["Message","error","style","color","success","fontSize","borderStyle","padding","operation","name","ServerFunctions","addContact","contact","setError","axios","post","number","id","then","catch","console","log","setTimeout","deleteContact","delete","getContacts","get","response","data","editContact","newNumber","put","Person","person","display","FilterForm","newFilter","filterHandler","value","onChange","PersonForm","addPerson","newName","nameHandler","numberHandler","onSubmit","type","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","shownPersons","setShownPersons","useEffect","contacts","editPerson","map","event","target","filter","match","RegExp","preventDefault","some","window","confirm","find","length","concat","className","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.90ab8ec8.chunk.js","sourcesContent":["import React from 'react'\n\nconst Message = ({error}) => {\n    if(!error){\n        return <></>\n    }\n    const style = {\n        color:error.success?'green':'red',\n        fontSize:16,\n        borderStyle:'solid',\n        padding:5\n    }\n    return (\n        <div style={style}>\n            {`${error.operation} ${error.name} `}{error.success?'succesful':'failed, contact already removed from server'}\n        </div>\n    )\n}\n\nexport default Message\n","import axios from \"axios\";\n\nconst addContact = (contact, setError) => {\n  axios\n    .post(\"/api/persons\", {\n      name: contact.name,\n      number: contact.number,\n      id: contact.id,\n    })\n    .then(() => {\n      setError({ success: true, operation: \"adding\", name: contact.name });\n    })\n    .catch((error) => {\n      console.log(`${error} in editContact`);\n      setError({ success: false, operation: \"adding\", name: contact.name });\n    });\n  setTimeout(() => {\n    setError(null);\n  }, 5000);\n};\nconst deleteContact = (contact, setError) => {\n  axios\n    .delete(`/api/persons/${contact.id}`)\n    .then(() => {\n      setError({ success: true, operation: \"deleting\", name: contact.name });\n    })\n    .catch((error) => {\n      console.log(`${error} in editContact`);\n      setError({ success: false, operation: \"deleting\", name: contact.name });\n    });\n  setTimeout(() => {\n    setError(null);\n  }, 5000);\n};\nconst getContacts = (setError) => {\n  return axios\n    .get(\"/api/persons\")\n    .then((response) => response.data)\n    .catch((error) => console.log(`${error} in getContact`));\n};\nconst editContact = (contact, newNumber, setError) => {\n  console.log(contact.id);\n  console.log(contact);\n  axios\n    .put(`/api/persons/${contact.id}`, {\n      ...contact,\n      number: newNumber,\n    })\n    .then(() => {\n      setError({ success: true, operation: \"editing\", name: contact.name });\n    })\n    .catch((error) => {\n      console.log(`${error} in editContact`);\n      setError({ success: false, operation: \"editing\", name: contact.name });\n    });\n  setTimeout(() => {\n    setError(null);\n  }, 5000);\n};\n\nconst ServerFunctions = { addContact, deleteContact, getContacts, editContact };\n\nexport default ServerFunctions;\n","import React, { useState, useEffect } from \"react\";\nimport Message from \"./Message\";\nimport ServerFunctions from \"./ServerFunctions\";\n\nconst Person = ({person}) =>{\n  return(\n  <p style={{display:\"inline-block\"}}>\n  {person.name} {person.number}\n</p>\n  )\n}\nconst FilterForm = ({newFilter, filterHandler}) => {\n  return(\n  <input value={newFilter} onChange={filterHandler} />\n  )\n}\nconst PersonForm = ({addPerson, newName, nameHandler, newNumber, numberHandler}) => {\n  return(\n  <form onSubmit={addPerson}>\n  <div>\n    name: <input value={newName} onChange={nameHandler} />\n  </div>\n  <div>\n    number: <input value={newNumber} onChange={numberHandler} />\n  </div>\n  <div>\n    <button type=\"submit\">add</button>\n  </div>\n</form>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [shownPersons, setShownPersons] = useState(persons);\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n      ServerFunctions.getContacts(setError)\n      .then(contacts=> {\n      setPersons(contacts)\n      setShownPersons(contacts)})\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    if (persons.some((person) => person.name === newName)) {\n      if(window.confirm(`${newName} is already added to phonebook, change number?`)){\n        editPerson(persons.find((person) => person.name===newName), newNumber)\n      }\n      return;\n    }\n    ServerFunctions.addContact({name:newName, number:newNumber, id:persons.length+1}, setError)\n    if (newFilter === \"\") {\n\n      setShownPersons(\n        shownPersons.concat({ name: newName, number: newNumber, id:persons.length+1})\n      );\n    }\n    setPersons(persons.concat({ name: newName, number: newNumber, id:persons.length+1}));\n  };\n\n  const editPerson = (contact, newNumber) => {\n    setShownPersons(persons.map(person => person.name===contact.name?{...person, number:newNumber}:person))\n    setPersons(persons.map(person => person.name===contact.name?{...person, number:newNumber}:person))\n    ServerFunctions.editContact(contact, newNumber, setError)\n  }\n\n  const removePerson = (contact) => {\n    if(window.confirm(`Delete ${contact.name}`)){\n    setShownPersons(persons.filter((person)=>person.id!==contact.id))\n    setPersons(persons.filter((person)=>person.id!==contact.id))\n    console.log(contact.id)\n    ServerFunctions.deleteContact(contact, setError)\n    }\n  }\n\n  const filterHandler = (event) => {\n    setNewFilter(event.target.value);\n    setShownPersons(\n      event.target.value === \"\"\n        ? persons\n        : persons.filter((person) =>\n            person.name.match(new RegExp(`^${event.target.value}\\\\w*`, \"gi\"))\n          )\n    );\n  };\n  const nameHandler = (event) => {\n    setNewName(event.target.value);\n  };\n  const numberHandler = (event) => {\n    setNewNumber(event.target.value);\n  };\n  return (\n    <div>\n      <Message error={error}/>\n      <h2>Phonebook</h2>\n      filter shown with\n      <FilterForm filterHandler={filterHandler} newFilter={newFilter}/>\n      <h2>Add New</h2>\n      <PersonForm addPerson={addPerson} newName={newName} nameHandler={nameHandler} newNumber={newNumber} numberHandler={numberHandler}/>\n      <h2>Numbers</h2>\n      {shownPersons ? shownPersons.map((person) => (\n        <div className=\"personentry\" key={person.name}>\n        <Person person={person}/> <button onClick={() =>removePerson(person)}>delete</button>\n        </div>\n      )):''}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}